<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta
	name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no"
	/>
	<meta name="description" content="" />
	<meta name="author" content="" />
	<link
	href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900"
	rel="stylesheet"
	/>
	<link rel="icon" type="image/png" href="images/author-image.png" />
	<title>UHospital_Sesion</title>
<!--
Reflux Template
https://templatemo.com/tm-531-reflux
-->
<!-- Bootstrap core CSS -->
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" />

<!-- Additional CSS Files -->
<!--

<link rel="stylesheet" href="{{url_for('static',filename='/css/fontawesome.css')}}" />
<link rel="stylesheet" href="{{url_for('static',filename='/css/templatemo-style.css')}}" />
<link rel="stylesheet" href="{{url_for('static',filename='/css/owl.css')}}" />
<link rel="stylesheet" href="{{url_for('static',filename='/css/lightbox.css')}}" />

-->



<link rel="stylesheet" href="css/fontawesome.css" />
<link rel="stylesheet" href="css/templatemo-style.css" />
<link rel="stylesheet" href="css/owl.css" />
<link rel="stylesheet" href="css/lightbox.css" />

</head>
<body>
<div id="page-wraper">
<!-- Sidebar Menu -->
<div class="responsive-nav">
	<i class="fa fa-bars" id="menu-toggle"></i>
	<div id="menu" class="menu">
		<i class="fa fa-times" id="menu-close"></i>
		<div class="container">
			<div class="image">
				<a href="#"><img src="images/author-image.png" alt="" /></a>
			</div>
			<div class="author-content">
				<h4>UHospital</h4>
				<span>UHospital</span>
				
			</div>
			<nav class="main-nav" role="navigation" >
				<ul class="main-menu">
					<li><button onclick="Cambio()" type "button" class="btn btn-danger btn-block">Pagina de inicio</button></li>
					
				</ul>
			</nav>
			<div class="social-network">
				<ul class="soial-icons">
					<li>
						<a href="https://www.facebook.com/tamsk99j/"
						><i class="fa fa-facebook"></i
							></a>
						</li>
						
					</ul>
				</div>
				<div class="copyright-text">
					<p>Pagina por Tomas Morales Saquic - 201900364</p>
				</div>
			</div>
		</div>
	</div>

	<section class="section about-me">
		<div class="container">
			<div class="section-heading">
				<h2>UHospital - Inicio de sesion</h2>
				<div class="line-dec"></div>
				<span>
					Llene los campos que se le solicitan para poder ingresar a la plataforma.
				</span
				>
			</div>
			<center>
			<div style="width: 40%;">
			<form>
			<div class="mb-3">
				<label for="nombre" class="form-label">Nombre</label>
				<input type="text" class="form-control" placeholder="Nombre de usuario" id="nombre">
			  </div>
			  <div class="mb-3">
				<label for="apellido" class="form-label">Contraseña</label>
				<input type="password" class="form-control" placeholder="Contraseña de usuario" id="contra">
			  </div>
			   	<br>
				<button onclick="revision()" type="button" class="btn btn-outline-light">Ingresar</button>
				<button onclick="Registro()" type="button" class="btn btn-outline-light">Registrarse</button>
			</form>
		  </div>
		</center>

		</div>
</section>
</div>

<!-- Scripts -->
<!-- Bootstrap core JavaScript -->
<script src="jquery/jquery.min.js"></script>
<script src="bootstrap/js/bootstrap.bundle.min.js"></script>

<script src="js/isotope.min.js"></script>
<script src="js/owl-carousel.js"></script>
<script src="js/lightbox.js"></script>

  <script>
	  function Cambio(){
		location.href="index.html"
	  }

	  function Registro(){
		location.href="registro.html"
	  }

	  function revision(){
		
      var cont = true
      fetch('https://backend-ipc-2021.herokuapp.com/Users', {
            method: 'GET',
            headers:{
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*',}})
            .then(res => res.json())
            .catch(err => {
                console.error('Error:', err)
                alert("Ocurrio un error, ver la consola")
            })
            .then(response =>{
                //console.log(response);
                // Usamos un foreach para darle el valor a un objeto dentro sde un arreglo.

                // arreglo.forEach(variable => {que se hara dentro del for})
                response.forEach(element => {
                    // En este caso, element es el objeto que esta recorriendo el for, entonces por cada iteracion manipulamos a element
                    
					
                    if(element.Username === document.querySelector('#nombre').value){
                    if(element.contrasenia === document.querySelector('#contra').value){
						console.log("entra")
						cont = false
						console.log(element.tipo)
						if(element.tipo == 0){
							var nombre = document.querySelector('#nombre').value
							sessionStorage.setItem("buscar",nombre)
							location.href="administrador.html"
						}
						if(element.tipo == 3){
							console.log("es de tipo 3")
							var nombre = document.querySelector('#nombre').value
							sessionStorage.setItem("buscar",nombre)
							location.href="UPaciente.html"
						}
						if(element.tipo ==2){
							console.log("es de tipo 2")
							var nombre = document.querySelector('#nombre').value
							sessionStorage.setItem("buscar",nombre)
							location.href = "UEnfermera.html"
						}
						if(element.tipo == 1){
							console.log("es de tipo 1")
							var nombre = document.querySelector('#nombre').value
							sessionStorage.setItem("buscar",nombre)
							location.href = "UDoctor.html"
						}
						
					}
                    }  
                });
                if(cont){
					alert("Usuario/contraseña incorrectos")
                }
                
            }) 
    }


  </script>
</body>
</html>
